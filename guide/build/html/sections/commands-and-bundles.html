<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Commands and Bundles &mdash; The Gort Guide 0.9 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Commands As Containers" href="commands-as-containers.html" />
    <link rel="prev" title="6. Bootstrapping Gort" href="bootstrapping.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> The Gort Guide
          </a>
              <div class="version">
                0.9.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">1. Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">2. Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">4. Configuring Gort</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">5. Deploying Gort</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootstrapping.html">6. Bootstrapping Gort</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Commands and Bundles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#commands">7.1. Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bundles">7.2. Bundles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bundle-permissions-and-rules">7.2.1. Bundle Permissions and Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-the-gort-bundle">7.2.2. Example: The <code class="docutils literal notranslate"><span class="pre">gort</span></code> Bundle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#invoking-commands">7.3. Invoking Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shortcuts">7.3.1. Shortcuts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-details">7.4. Implementation Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commands-as-containers.html">8. Commands As Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="command-environment-variables.html">9. Command Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="command-bundles.html">10. Command Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundle-configurations.html">11. Bundle Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-and-rules.html">12. Permissions and Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-a-command-bundle.html">13. Writing a Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-your-first-command-bundle.html">14. Installing Your First Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing-bundles.html">15. Managing Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="command-execution-rules.html">16. Command Execution Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">17. Output Format Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates-response-envelope.html">18. The Response Envelope</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates-functions.html">19. Template Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="going-forward.html">20. Going Forward: Features to Look Forward To</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Gort Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">7. </span>Commands and Bundles</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/sections/commands-and-bundles.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="commands-and-bundles">
<h1><span class="section-number">7. </span>Commands and Bundles<a class="headerlink" href="#commands-and-bundles" title="Permalink to this headline"></a></h1>
<p>As a chatops bot, commands are central to Gort. Let’s take a look at
exactly what commands are, how they’re organized, and how they’re
managed.</p>
<p>Let’s start with an example. Entering the following into Slack:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!gort:help
</pre></div>
</div>
<p>You should receive a response that looks something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">know</span> <span class="n">about</span> <span class="n">these</span> <span class="n">commands</span><span class="p">:</span>

<span class="n">curl</span><span class="p">:</span><span class="n">curl</span>
<span class="n">gort</span><span class="p">:</span><span class="n">bundle</span>
<span class="n">gort</span><span class="p">:</span><span class="n">group</span>
<span class="n">gort</span><span class="p">:</span><span class="n">help</span>
<span class="n">gort</span><span class="p">:</span><span class="n">role</span>
<span class="n">gort</span><span class="p">:</span><span class="n">user</span>
<span class="n">gort</span><span class="p">:</span><span class="n">version</span>
</pre></div>
</div>
<p>Typing <code class="docutils literal notranslate"><span class="pre">!gort:help</span></code> executed the <code class="docutils literal notranslate"><span class="pre">help</span></code> command from the <code class="docutils literal notranslate"><span class="pre">gort</span></code>
command bundle. From the response, you can see that the system currently
has two bundles installed (<code class="docutils literal notranslate"><span class="pre">curl</span></code>, and <code class="docutils literal notranslate"><span class="pre">gort</span></code>), each of which
contains one or more commands. The <code class="docutils literal notranslate"><span class="pre">curl</span></code> bundle contains a single
command (also named <code class="docutils literal notranslate"><span class="pre">curl</span></code>), and the <code class="docutils literal notranslate"><span class="pre">gort</span></code> bundle contains several
commands, one of which is the <code class="docutils literal notranslate"><span class="pre">help</span></code> command we just invoked.</p>
<p>Try calling <code class="docutils literal notranslate"><span class="pre">gort:help</span> <span class="pre">COMMAND</span></code> to find out more about a specific
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!gort:help gort:user
</pre></div>
</div>
<p>This should provide a response like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Part</span> <span class="n">of</span> <span class="n">the</span> <span class="s2">&quot;gort&quot;</span> <span class="n">bundle</span><span class="o">.</span>

<span class="n">Allows</span> <span class="n">you</span> <span class="n">to</span> <span class="n">perform</span> <span class="n">user</span> <span class="n">administration</span><span class="o">.</span>

<span class="n">Use</span> <span class="s2">&quot;!gort:user --help&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span> <span class="n">about</span> <span class="n">this</span> <span class="n">command</span><span class="o">.</span>
</pre></div>
</div>
<p>As indicated in the above output, many commands also support a dedicated
<code class="docutils literal notranslate"><span class="pre">--help</span></code> argument (which is handled by the command executable, not by
Gort). For example, typing <code class="docutils literal notranslate"><span class="pre">!gort:help</span> <span class="pre">--help</span></code> will return the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Provides information about a command.

If no command is specified, this will list all commands installed in Gort.

Usage:
  !gort:help [flags] [command]

Flags:
  -h, --help   Show this message and exit
</pre></div>
</div>
<section id="commands">
<h2><span class="section-number">7.1. </span>Commands<a class="headerlink" href="#commands" title="Permalink to this headline"></a></h2>
<p>If you think of Gort as a “shared command line”, then commands are like
the executables in your terminal.</p>
<p>A given command may need some additional information that would not be
shared on the “shared command line”, but will have to be setup by an
administrator, such as an OAuth key. See <a class="reference external" href="dynamic-command-configuration.md">Dynamic Command
Configuration</a> for more information
on how to get this data for command execution.</p>
</section>
<section id="bundles">
<h2><span class="section-number">7.2. </span>Bundles<a class="headerlink" href="#bundles" title="Permalink to this headline"></a></h2>
<p>Bundles (or “command bundles”) are the packaging unit for collections of
one or more commands.</p>
<p>Each references a single <a class="reference external" href="https://www.docker.com/resources/what-container">Docker container
image</a> that contains
all the binaries and other dependencies for executing one or more
commands. They also include some data about the commands, including a
small amount of documentation and other metadata. See <a class="reference external" href="writing-a-command-bundle.md">Writing A Command
Bundle</a> for more specifics.</p>
<p>Bundles can be installed into Gort by an administrator (or any user with
the <code class="docutils literal notranslate"><span class="pre">manage_commands</span></code> permission) using the <code class="docutils literal notranslate"><span class="pre">gort</span></code> command-line
utility. See <a class="reference external" href="managing-bundles.md">Managing Bundles</a> for more on
bundle installation.</p>
<section id="bundle-permissions-and-rules">
<h3><span class="section-number">7.2.1. </span>Bundle Permissions and Rules<a class="headerlink" href="#bundle-permissions-and-rules" title="Permalink to this headline"></a></h3>
<p>Bundles also contain a set of permissions and authorization rules for
their commands. When a bundle is installed, these permissions and
accompanying rules are automatically created in the Gort system.</p>
<p>Since permissions are namespaced to the bundle they originate from,
installing a bundle’s permissions will never conflict with any existing
authorization system configurations you may have made. No users are
automatically assigned any of these permissions.</p>
</section>
<section id="example-the-gort-bundle">
<h3><span class="section-number">7.2.2. </span>Example: The <code class="docutils literal notranslate"><span class="pre">gort</span></code> Bundle<a class="headerlink" href="#example-the-gort-bundle" title="Permalink to this headline"></a></h3>
<p>The gort bundle is a unique bundle in that it is effectively built into
the bot. All Gort instances will have this bundle installed
automatically, which is how the core permissions and authorization rules
of the system come to be installed.</p>
</section>
</section>
<section id="invoking-commands">
<h2><span class="section-number">7.3. </span>Invoking Commands<a class="headerlink" href="#invoking-commands" title="Permalink to this headline"></a></h2>
<p>To invoke a command, like <code class="docutils literal notranslate"><span class="pre">gort:help</span></code>, you actually have a few
options.</p>
<p>First, you can use a “command prefix”, which defaults to <code class="docutils literal notranslate"><span class="pre">!</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!gort:help
</pre></div>
</div>
<p>You can also interact with the bot in 1-on-1 chat, in which case you may
type commands directly; everything you type to the bot is considered a
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gort</span><span class="p">:</span><span class="n">help</span>
</pre></div>
</div>
<!--
First, you can address the bot directly by name in a channel in which the bot is listening. Here, my bot is named Marvin:

```
@marvin gort:help
``` --><section id="shortcuts">
<h3><span class="section-number">7.3.1. </span>Shortcuts<a class="headerlink" href="#shortcuts" title="Permalink to this headline"></a></h3>
<p>Fully-qualifying all command names with their bundle name (i.e.,
<code class="docutils literal notranslate"><span class="pre">gort:help</span></code>) can get tedious for frequently-used commands.</p>
<p>Fortunately, Gort allows a shortcut: if a command name happens to be
unique within a Gort installation (that is, no other bundles are
installed that have a command with the same name), you may type the bare
command. For example, <code class="docutils literal notranslate"><span class="pre">gort:help</span></code> can be replaced with just <code class="docutils literal notranslate"><span class="pre">help</span></code>,
so long as no other bundles have a <code class="docutils literal notranslate"><span class="pre">help</span></code> command.</p>
</section>
</section>
<section id="implementation-details">
<h2><span class="section-number">7.4. </span>Implementation Details<a class="headerlink" href="#implementation-details" title="Permalink to this headline"></a></h2>
<p>Every bundle has a Docker image that contains all of its commands.</p>
<p>By default, the command uses the image’s <a class="reference external" href="https://docs.docker.com/engine/reference/builder/#entrypoint">default
entrypoint</a>
to handle commands. However, if a command has an <code class="docutils literal notranslate"><span class="pre">executable</span></code> defined,
then the given binary is used instead (like a <cite>Docker `</cite>–entrypoint``
parameter &lt;<a class="reference external" href="https://docs.docker.com/engine/reference/run/#entrypoint-default-command-to-execute-at-runtime">https://docs.docker.com/engine/reference/run/#entrypoint-default-command-to-execute-at-runtime</a>&gt;`__).</p>
<p>Any parameters you type into the command line are passed directly to the
containerized binary, which can handle them just like a normal
command-line execution. This allows you to implement your command using
a CLI framework in any language you like.</p>
<p>See <a class="reference external" href="commands-as-containers.md">Commands as Containers</a> for more
details.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bootstrapping.html" class="btn btn-neutral float-left" title="6. Bootstrapping Gort" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="commands-as-containers.html" class="btn btn-neutral float-right" title="8. Commands As Containers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The Gort Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>